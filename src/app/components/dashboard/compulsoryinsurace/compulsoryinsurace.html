
<app-navbar></app-navbar>



<form *ngIf="!isLoading && !loadError" [formGroup]="surveyForm" (ngSubmit)="submitForm()">
  <h2>Kötelező biztosítási ajánlathoz szükséges adatok</h2>

  <mat-form-field appearance="fill">
    <mat-label>Szerződő neve</mat-label>
    <input matInput formControlName="szerzodoNev" required>
  </mat-form-field>

  <mat-form-field appearance="fill">
    <mat-label>Állandó lakcím / székhely</mat-label>
    <input matInput formControlName="szerzodoCim" required>
  </mat-form-field>

  <mat-form-field appearance="fill">
    <mat-label>Születési dátum</mat-label>
    <input matInput type="date" formControlName="szuletesiDatum" required>
  </mat-form-field>

  <mat-form-field appearance="fill">
    <mat-label>Édesanya leánykori neve</mat-label>
    <input matInput formControlName="anyjaNeve" required>
  </mat-form-field>

  <mat-form-field appearance="fill">
    <mat-label>Adószám (ha cég)</mat-label>
    <input matInput formControlName="cegAdoszam">
  </mat-form-field>

  <mat-label>Casco szerződéskötés oka</mat-label>
  <mat-radio-group formControlName="szerzodesOka" class="radio-group">
    <mat-radio-button value="tulajdonszerzes">Gépjármű tulajdonjogának és üzembentartói jogának megszerzése</mat-radio-button>
    <mat-radio-button value="biztositovaltas">Biztosítóváltás</mat-radio-button>
    <mat-radio-button value="egyeb">Egyéb</mat-radio-button>
  </mat-radio-group>

  <p><strong>Forgalmi engedély másolata esetén nem szükséges a járműadatokat kitölteni.</strong></p>

  <mat-form-field appearance="fill">
    <mat-label>Rendszám</mat-label>
    <input matInput formControlName="rendszam" required>
  </mat-form-field>

  <mat-form-field appearance="fill">
    <mat-label>Alvázszám</mat-label>
    <input matInput formControlName="alvazszam" required>
  </mat-form-field>

  <mat-form-field appearance="fill">
    <mat-label>Forgalmi engedély száma</mat-label>
    <input matInput formControlName="forgalmiSzam" required>
  </mat-form-field>

  <mat-form-field appearance="fill">
    <mat-label>Járműkategória</mat-label>
    <input matInput formControlName="jarmuKategoria" required>
  </mat-form-field>

  <mat-form-field appearance="fill">
    <mat-label>Gépjármű gyártmánya</mat-label>
    <input matInput formControlName="gyarto" required>
  </mat-form-field>

  <mat-form-field appearance="fill">
    <mat-label>Pontos típus</mat-label>
    <input matInput formControlName="tipus" required>
  </mat-form-field>

  <mat-form-field appearance="fill">
    <mat-label>Gyártási év</mat-label>
    <input matInput type="number" formControlName="gyartasiEv" required>
  </mat-form-field>

  <mat-form-field appearance="fill">
    <mat-label>Hengerűrtartalom (cm³)</mat-label>
    <input matInput type="number" formControlName="hengerurtartalom" required>
  </mat-form-field>

  <mat-form-field appearance="fill">
    <mat-label>Teljesítmény (LE)</mat-label>
    <input matInput type="number" formControlName="teljesitmeny" required>
  </mat-form-field>

  <mat-form-field appearance="fill">
    <mat-label>Üzemanyag típusa</mat-label>
    <input matInput formControlName="uzemanyag" required>
  </mat-form-field>

  <mat-form-field appearance="fill">
    <mat-label>Kilométeróra aktuális állása</mat-label>
    <input matInput type="number" formControlName="kmAllas" required>
  </mat-form-field>

  <mat-form-field appearance="fill">
    <mat-label>Igazolható kármentes évek száma</mat-label>
    <input matInput type="number" formControlName="karmentesEvek" required>
  </mat-form-field>

  <div class="form-actions">
    <button 
      mat-raised-button 
      color="primary" 
      type="submit" 
      [disabled]="surveyForm.invalid || isSubmitting">
      {{ hasExistingResponse ? 'Frissítés' : 'Küldés' }}
      <mat-spinner *ngIf="isSubmitting" diameter="20" class="button-spinner"></mat-spinner>
    </button>

    <button 
      *ngIf="isSubmitted"
      mat-raised-button 
      color="accent" 
      type="button"
      (click)="enableEditing()"
      [disabled]="isSubmitting">
      Módosítás
    </button>
  </div>
</form>
